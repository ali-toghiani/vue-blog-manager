"use strict";(self["webpackChunkvue_blog_manager"]=self["webpackChunkvue_blog_manager"]||[]).push([[278],{3278:function(e,t,r){r.r(t),r.d(t,{default:function(){return $}});var a=r(6768),i=r(5130),s=r(4232);const l={class:"new-article-divider w-full flex flex-col justify-center p-4 md:p-0 gap-y-4 gap-x-6 md:grid md:grid-cols-[2fr_1fr]"},o=["disabled"],n=["disabled"],d=["disabled"];function u(e,t,r,u,c,p){const g=(0,a.g2)("app-form-field"),b=(0,a.g2)("app-button"),f=(0,a.g2)("app-widget"),v=(0,a.g2)("app-article-tags-view");return(0,a.uX)(),(0,a.CE)("section",l,[(0,a.bF)(f,{title:r.isEditing?"Edit Article":"Create Article"},{default:(0,a.k6)((()=>[(0,a.Lk)("form",{class:"p-6",onSubmit:t[6]||(t[6]=(0,i.D$)(((...e)=>u.submitForm&&u.submitForm(...e)),["prevent"]))},[(0,a.bF)(g,{class:"mb-3",id:"title",label:"Title",error:u.errors.title},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{class:"text-[14px]",type:"text",id:"title",disabled:r.isEditing,placeholder:"Title","onUpdate:modelValue":t[0]||(t[0]=e=>u.form.title=e),onBlur:t[1]||(t[1]=(...e)=>u.validateForm&&u.validateForm(...e))},null,40,o),[[i.Jo,u.form.title]])])),_:1},8,["error"]),(0,a.bF)(g,{class:"mb-3",id:"description",label:"Description",error:u.errors.description},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{class:"text-[14px]",type:"text",id:"description",disabled:u.isLoading,placeholder:"Description","onUpdate:modelValue":t[2]||(t[2]=e=>u.form.description=e),onBlur:t[3]||(t[3]=(...e)=>u.validateForm&&u.validateForm(...e))},null,40,n),[[i.Jo,u.form.description]])])),_:1},8,["error"]),(0,a.bF)(g,{class:"mb-3",id:"body",label:"Body",error:u.errors.body},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("textarea",{class:"text-[14px] w-full border bg-white rounded-lg p-2",rows:"5",type:"text",id:"body",disabled:u.isLoading,"onUpdate:modelValue":t[4]||(t[4]=e=>u.form.body=e),onBlur:t[5]||(t[5]=(...e)=>u.validateForm&&u.validateForm(...e))},null,40,d),[[i.Jo,u.form.body]])])),_:1},8,["error"]),(0,a.bF)(b,{class:"!w-fit mt-2",loading:u.isLoading,disabled:u.isLoading},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(r.isEditing?"Save Changes":"Submit"),1)])),_:1},8,["loading","disabled"])],32)])),_:1},8,["title"]),(0,a.bF)(v,{initialTags:u.initialTags,isEditing:r.isEditing,"onUpdate:selectedTags":u.updateSelectedTags},null,8,["initialTags","isEditing","onUpdate:selectedTags"])])}r(4114);var c=r(144),p=r(1387),g=r(4084),b=r(1394),f=r(857),v=r(4191);const m={class:"tags-container border bg-white rounded-lg p-6"},y={key:0,class:"tag-list border rounded-lg p-4"},h={key:1},k={key:2},w={class:"flex justify-center items-center gap-[10px] text-green-500"};function x(e,t,r,s,l,o){const n=(0,a.g2)("app-form-field"),d=(0,a.g2)("app-checkbox"),u=(0,a.g2)("spinner-icon");return(0,a.uX)(),(0,a.CE)("section",m,[(0,a.Lk)("form",{class:"mb-4",onSubmit:t[3]||(t[3]=(0,i.D$)((()=>{}),["prevent"]))},[(0,a.bF)(n,{id:"tag",label:"Tags",error:s.tagError},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{onKeyup:[t[0]||(t[0]=(...e)=>s.resetError&&s.resetError(...e)),t[1]||(t[1]=(0,i.jR)(((...e)=>s.addNewTag&&s.addNewTag(...e)),["enter"]))],class:"text-[14px]",type:"text",id:"tag",placeholder:"New tag","onUpdate:modelValue":t[2]||(t[2]=e=>s.newTag=e)},null,544),[[i.Jo,s.newTag]])])),_:1},8,["error"])],32),s.sortedTags.length>0?((0,a.uX)(),(0,a.CE)("ul",y,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.sortedTags,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:e,class:"flex gap-x-1 mb-2"},[(0,a.bF)(d,{id:"tag"+t,value:e,label:e,"model-value":s.selectedTags.includes(e),"onUpdate:modelValue":t=>s.updateTag(e,t)},null,8,["id","value","label","model-value","onUpdate:modelValue"])])))),128))])):r.isEditing?((0,a.uX)(),(0,a.CE)("div",h,t[4]||(t[4]=[(0,a.Lk)("span",null,"You haven't created any Tags!",-1)]))):((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",w,[t[5]||(t[5]=(0,a.Lk)("span",null,"Fetching Tags",-1)),(0,a.bF)(u,{class:"spinner w-[20px] h-[20px] fill-green-500"})])]))])}r(8111),r(1148),r(2489);var T=r(1010);const E={class:"flex items-center gap-x-2"},F={class:"relative flex items-center"},L=["id","value","checked"],A={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},C=["for"];function V(e,t,r,i,l,o){return(0,a.uX)(),(0,a.CE)("div",E,[(0,a.Lk)("div",F,[(0,a.Lk)("input",{type:"checkbox",id:r.id,value:r.value,checked:r.modelValue,onInput:t[0]||(t[0]=(...e)=>i.updateCheckbox&&i.updateCheckbox(...e)),class:"absolute opacity-0 w-5 h-5 cursor-pointer"},null,40,L),(0,a.Lk)("span",{class:(0,s.C4)(["custom-checkbox w-[16px] h-[16px] border-2 rounded-sm flex items-center justify-center",[r.modelValue?"bg-green-300 border-green-300":"border-gray-600",e.error?"!border-red-500":""]])},[r.modelValue?((0,a.uX)(),(0,a.CE)("svg",A,t[1]||(t[1]=[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(0,a.Q3)("",!0)],2)]),(0,a.Lk)("label",{for:r.id,class:"cursor-pointer"},(0,s.v_)(r.label),9,C)])}var _={name:"app-checkbox",props:{id:{type:String,required:!0},value:{type:[String,Number,Object],required:!0},modelValue:{type:Boolean,default:!1},label:{type:String,default:""}},setup(e,t){function r(e){t.emit("update:modelValue",e.target.checked)}return{updateCheckbox:r}}},S=r(1241);const B=(0,S.A)(_,[["render",V],["__scopeId","data-v-2e02481f"]]);var R=B,K={name:"app-article-tags-view",components:{AppFormField:f.A,AppCheckbox:R,SpinnerIcon:T.A},props:{initialTags:{type:Array,default:()=>[],validator:e=>e.every((e=>"string"===typeof e))},isEditing:{type:Boolean,default:!1}},setup(e,t){const{appContext:r}=(0,a.nI)(),i=r.config.globalProperties.$http,s=(0,c.KR)(!0),l=(0,c.KR)(""),o=(0,c.KR)(""),n=(0,c.KR)([]),d=(0,c.KR)([]),u=(0,a.EW)((()=>[...n.value].sort()));(0,a.wB)(d,(e=>{t.emit("update:selectedTags",e)}),{deep:!0}),(0,a.wB)(e.initialTags,(()=>{n.value=[...e.initialTags],d.value=[...e.initialTags]})),(0,a.sV)((()=>{e.isEditing||0!==e.initialTags.length||g()})),(0,a.$u)((()=>{0==n.value.length&&e.initialTags.length>0&&(n.value=[...e.initialTags],d.value=[...e.initialTags])}));const p=(e,t)=>{d.value=t?[...d.value,e]:d.value.filter((t=>t!==e))};async function g(){try{s.value=!0;const e=await i.get("/tags");return n.value=e.data.tags,{success:!0,response:e.data}}catch(e){if(e.response)return{success:!1,errors:e.response.data.errors||{}};throw new Error("Network error occurred")}finally{s.value=!1}}function b(){o.value=""}function f(e){b();const t=e.target.value;t?n.value.includes(t)?o.value="Tag Already Exists!":(n.value=[t,...n.value],d.value=[t,...d.value],l.value=""):o.value="Value is required!"}return{newTag:l,tagError:o,tagList:n,selectedTags:d,sortedTags:u,addNewTag:f,resetError:b,updateTag:p}}};const j=(0,S.A)(K,[["render",x]]);var X=j,N={components:{AppWidget:v.A,AppFormField:f.A,AppButton:b.A,AppArticleTagsView:X},props:{isEditing:{type:Boolean},slug:{type:String}},setup(e){const{appContext:t}=(0,a.nI)(),r=t.config.globalProperties.$http,i=(0,p.rd)(),s=(0,c.KR)(!1),l=(0,c.Kh)({title:"",description:"",body:"",tagList:[]}),o=(0,c.Kh)({title:"",description:"",body:"",tagList:[]}),n=(0,c.KR)([]);function d(e){l.tagList=e}async function u(e){s.value=!0;try{const t=await r.get(`/articles/${e}`);return Object.assign(l,t.data.article),n.value=[...t.data.article.tagList],{success:!0,data:t.data}}catch(t){console.error("Fetching Article By Slug Failed")}finally{s.value=!1}}(0,a.sV)((()=>{e.slug&&u(e.slug)}));const b=()=>{let e=!0;return o.title="",o.description="",o.body="",l.title||(o.title="Title is required!",e=!1),l.description||(o.description="Description is required!",e=!1),l.body||(o.body="Body is required!",e=!1),e};async function f(e){try{s.value=!0;const t=await r.put(`/articles/${e}`,{article:l});return g.oR.success("Article Edited Successfully!"),m(),i.push("/articles"),{success:!0,data:t.data}}catch(t){if(g.oR.error(t.response.data.message),t.response)return{success:!1,errors:t.response.data.errors||{}};throw new Error("Network error occurred")}finally{s.value=!1}}async function v(){if(b())if(e.slug)f(e.slug);else try{s.value=!0;const e=await r.post("/articles",{article:l});return g.oR.success("Article Created Successfully!"),m(),i.push("/articles"),{success:!0,data:e.data}}catch(t){if(g.oR.error(t.response.data.message),t.response)return{success:!1,errors:t.response.data.errors||{}};throw new Error("Network error occurred")}finally{s.value=!1}}function m(){Object.assign(l,{title:"",description:"",body:"",tagList:[]}),Object.assign(o,{title:"",description:"",body:""})}return{form:l,errors:o,isLoading:s,submitForm:v,validateForm:b,updateSelectedTags:d,initialTags:n}}};const U=(0,S.A)(N,[["render",u]]);var $=U}}]);
//# sourceMappingURL=278.2fc463ac.js.map