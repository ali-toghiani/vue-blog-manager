"use strict";(self["webpackChunkvue_blog_manager"]=self["webpackChunkvue_blog_manager"]||[]).push([[893],{6893:function(e,t,r){r.r(t),r.d(t,{default:function(){return K}});var a=r(6768),i=r(5130),l=r(4232);const s={class:"new-article-divider w-full flex flex-col justify-center p-4 md:p-0 gap-y-4 gap-x-6 md:grid md:grid-cols-[2fr_1fr]"},o=["disabled"],n=["disabled"],d=["disabled"];function u(e,t,r,u,c,p){const g=(0,a.g2)("app-form-field"),b=(0,a.g2)("app-button"),f=(0,a.g2)("app-widget"),v=(0,a.g2)("app-article-tags-view");return(0,a.uX)(),(0,a.CE)("section",s,[(0,a.bF)(f,{title:r.isEditing?"Edit Article":"Create Article"},{default:(0,a.k6)((()=>[(0,a.Lk)("form",{class:"p-6",onSubmit:t[6]||(t[6]=(0,i.D$)(((...e)=>u.submitForm&&u.submitForm(...e)),["prevent"]))},[(0,a.bF)(g,{class:"mb-3",id:"title",label:"Title",error:u.errors.title},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{class:"text-[14px]",type:"text",id:"title",disabled:r.isEditing,placeholder:"Title","onUpdate:modelValue":t[0]||(t[0]=e=>u.form.title=e),onBlur:t[1]||(t[1]=(...e)=>u.validateForm&&u.validateForm(...e))},null,40,o),[[i.Jo,u.form.title]])])),_:1},8,["error"]),(0,a.bF)(g,{class:"mb-3",id:"description",label:"Description",error:u.errors.description},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{class:"text-[14px]",type:"text",id:"description",disabled:u.isLoading,placeholder:"Description","onUpdate:modelValue":t[2]||(t[2]=e=>u.form.description=e),onBlur:t[3]||(t[3]=(...e)=>u.validateForm&&u.validateForm(...e))},null,40,n),[[i.Jo,u.form.description]])])),_:1},8,["error"]),(0,a.bF)(g,{class:"mb-3",id:"body",label:"Body",error:u.errors.body},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("textarea",{class:"text-[14px] w-full border bg-white rounded-lg p-2",rows:"5",type:"text",id:"body",disabled:u.isLoading,"onUpdate:modelValue":t[4]||(t[4]=e=>u.form.body=e),onBlur:t[5]||(t[5]=(...e)=>u.validateForm&&u.validateForm(...e))},null,40,d),[[i.Jo,u.form.body]])])),_:1},8,["error"]),(0,a.bF)(b,{class:"!w-fit mt-2",loading:u.isLoading,disabled:u.isLoading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(r.isEditing?"Save Changes":"Submit"),1)])),_:1},8,["loading","disabled"])],32)])),_:1},8,["title"]),(0,a.bF)(v,{initialTags:u.initialTags,isEditing:r.isEditing,"onUpdate:selectedTags":u.updateSelectedTags},null,8,["initialTags","isEditing","onUpdate:selectedTags"])])}var c=r(144),p=r(4084),g=r(4881),b=r(471),f=r(8483);const v={class:"tags-container border bg-white rounded-lg p-6"},m={class:"tag-list border rounded-lg p-4"};function y(e,t,r,l,s,o){const n=(0,a.g2)("app-form-field"),d=(0,a.g2)("app-checkbox");return(0,a.uX)(),(0,a.CE)("section",v,[(0,a.Lk)("form",{class:"mb-4",onSubmit:t[3]||(t[3]=(0,i.D$)((()=>{}),["prevent"]))},[(0,a.bF)(n,{id:"tag",label:"Tags",error:l.tagError},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{onKeyup:[t[0]||(t[0]=(...e)=>l.resetError&&l.resetError(...e)),t[1]||(t[1]=(0,i.jR)(((...e)=>l.addNewTag&&l.addNewTag(...e)),["enter"]))],class:"text-[14px]",type:"text",id:"tag",placeholder:"New tag","onUpdate:modelValue":t[2]||(t[2]=e=>l.newTag=e)},null,544),[[i.Jo,l.newTag]])])),_:1},8,["error"])],32),(0,a.Lk)("ul",m,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.sortedTags,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:e,class:"flex gap-x-1 mb-2"},[(0,a.bF)(d,{id:"tag"+t,value:e,label:e,"model-value":l.selectedTags.includes(e),"onUpdate:modelValue":t=>l.updateTag(e,t)},null,8,["id","value","label","model-value","onUpdate:modelValue"])])))),128))])])}r(8111),r(1148),r(2489);const k={class:"flex items-center gap-x-2"},w={class:"relative flex items-center"},h=["id","value","checked"],x={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},T=["for"];function E(e,t,r,i,s,o){return(0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",w,[(0,a.Lk)("input",{type:"checkbox",id:r.id,value:r.value,checked:r.modelValue,onInput:t[0]||(t[0]=(...e)=>i.updateCheckbox&&i.updateCheckbox(...e)),class:"absolute opacity-0 w-5 h-5 cursor-pointer"},null,40,h),(0,a.Lk)("span",{class:(0,l.C4)(["custom-checkbox w-[16px] h-[16px] border-2 rounded-sm flex items-center justify-center",[r.modelValue?"bg-green-300 border-green-300":"border-gray-600",e.error?"!border-red-500":""]])},[r.modelValue?((0,a.uX)(),(0,a.CE)("svg",x,t[1]||(t[1]=[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(0,a.Q3)("",!0)],2)]),(0,a.Lk)("label",{for:r.id,class:"cursor-pointer"},(0,l.v_)(r.label),9,T)])}var F={name:"app-checkbox",props:{id:{type:String,required:!0},value:{type:[String,Number,Object],required:!0},modelValue:{type:Boolean,default:!1},label:{type:String,default:""}},setup(e,t){function r(e){t.emit("update:modelValue",e.target.checked)}return{updateCheckbox:r}}},L=r(1241);const A=(0,L.A)(F,[["render",E],["__scopeId","data-v-2e02481f"]]);var C=A,V={name:"app-article-tags-view",components:{AppFormField:b.A,AppCheckbox:C},props:{initialTags:{type:Array,default:()=>[],validator:e=>e.every((e=>"string"===typeof e))},isEditing:{type:Boolean,default:!1}},setup(e,t){const{appContext:r}=(0,a.nI)(),i=r.config.globalProperties.$http,l=(0,c.KR)(!1),s=(0,c.KR)(""),o=(0,c.KR)(""),n=(0,c.KR)([]),d=(0,a.EW)((()=>[...n.value].sort())),u=(0,c.KR)([]),p=(e,t)=>{u.value=t?[...u.value,e]:u.value.filter((t=>t!==e))};async function g(){try{l.value=!0;const e=await i.get("/tags");return n.value=e.data.tags,{success:!0,response:e.data}}catch(e){if(e.response)return{success:!1,errors:e.response.data.errors||{}};throw new Error("Network error occurred")}finally{l.value=!1}}function b(){o.value=""}function f(e){b();const t=e.target.value;t?n.value.includes(t)?o.value="Tag Already Exists!":(n.value=[t,...n.value],u.value=[t,...u.value],s.value=""):o.value="Value is required!"}return(0,a.wB)(u,(e=>{t.emit("update:selectedTags",e)}),{deep:!0}),(0,a.wB)(e.initialTags,(()=>{console.log("**",e.initialTags),n.value=[...e.initialTags],u.value=[...e.initialTags]})),(0,a.sV)((()=>{e.isEditing||0!==e.initialTags.length||g()})),(0,a.$u)((()=>{0==n.value.length&&(n.value=[...e.initialTags],u.value=[...e.initialTags])})),{newTag:s,tagError:o,tagList:n,selectedTags:u,sortedTags:d,addNewTag:f,resetError:b,updateTag:p}}};const _=(0,L.A)(V,[["render",y]]);var B=_,S={components:{AppWidget:f.A,AppFormField:b.A,AppButton:g.A,AppArticleTagsView:B},props:{isEditing:{type:Boolean},slug:{type:String}},setup(e){const{appContext:t}=(0,a.nI)(),r=t.config.globalProperties.$http,i=(0,c.KR)(!1),l=(0,c.Kh)({title:"",description:"",body:"",tagList:[]}),s=(0,c.Kh)({title:"",description:"",body:"",tagList:[]}),o=(0,c.KR)([]);function n(e){l.tagList=e}async function d(e){i.value=!0;try{const t=await r.get(`/articles/${e}`);return Object.assign(l,t.data.article),o.value=[...t.data.article.tagList],{success:!0,data:t.data}}catch(t){console.error("Fetching Article By Slug Failed")}finally{i.value=!1}}(0,a.sV)((()=>{e.slug&&d(e.slug)}));const u=()=>{let e=!0;return s.title="",s.description="",s.body="",l.title||(s.title="Title is required!",e=!1),l.description||(s.description="Description is required!",e=!1),l.body||(s.body="Body is required!",e=!1),e};async function g(e){try{i.value=!0;const t=await r.put(`/articles/${e}`,{article:l});return p.oR.success("Article Edited Successfully!"),f(),{success:!0,data:t.data}}catch(t){if(p.oR.success("Article Edit Failed!"),t.response)return{success:!1,errors:t.response.data.errors||{}};throw new Error("Network error occurred")}finally{i.value=!1}}async function b(){if(u())if(e.slug)g(e.slug);else try{i.value=!0;const e=await r.post("/articles",{article:l});return p.oR.success("Article Created Successfully!"),f(),{success:!0,data:e.data}}catch(t){if(p.oR.success("Article Creation Failed!"),t.response)return{success:!1,errors:t.response.data.errors||{}};throw new Error("Network error occurred")}finally{i.value=!1}}function f(){Object.assign(l,{title:"",description:"",body:"",tagList:[]}),Object.assign(s,{title:"",description:"",body:""})}return{form:l,errors:s,isLoading:i,submitForm:b,validateForm:u,updateSelectedTags:n,initialTags:o}}};const R=(0,L.A)(S,[["render",u]]);var K=R}}]);
//# sourceMappingURL=893.b9421332.js.map