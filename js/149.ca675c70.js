"use strict";(self["webpackChunkvue_blog_manager"]=self["webpackChunkvue_blog_manager"]||[]).push([[149],{5149:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var a=r(6768),i=r(5130),l=r(4232);const s={class:"new-article-divider w-full flex flex-col justify-center p-4 md:p-0 gap-y-4 gap-x-6 md:grid md:grid-cols-[2fr_1fr]"},o=["disabled"];function n(e,t,r,n,d,u){const c=(0,a.g2)("app-form-field"),p=(0,a.g2)("app-button"),g=(0,a.g2)("app-widget"),b=(0,a.g2)("app-article-tags-view");return(0,a.uX)(),(0,a.CE)("section",s,[(0,a.bF)(g,{title:r.isEditing?"Edit Article":"Create Article"},{default:(0,a.k6)((()=>[(0,a.Lk)("form",{class:"p-6",onSubmit:t[6]||(t[6]=(0,i.D$)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"]))},[(0,a.bF)(c,{class:"mb-3",id:"title",label:"Title",error:n.errors.title},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{class:"text-[14px]",type:"text",id:"title",disabled:r.isEditing,placeholder:"Title","onUpdate:modelValue":t[0]||(t[0]=e=>n.form.title=e),onBlur:t[1]||(t[1]=(...e)=>n.validateForm&&n.validateForm(...e))},null,40,o),[[i.Jo,n.form.title]])])),_:1},8,["error"]),(0,a.bF)(c,{class:"mb-3",id:"description",label:"Description",error:n.errors.description},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{class:"text-[14px]",type:"text",id:"description",placeholder:"Description","onUpdate:modelValue":t[2]||(t[2]=e=>n.form.description=e),onBlur:t[3]||(t[3]=(...e)=>n.validateForm&&n.validateForm(...e))},null,544),[[i.Jo,n.form.description]])])),_:1},8,["error"]),(0,a.bF)(c,{class:"mb-3",id:"body",label:"Body",error:n.errors.body},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("textarea",{class:"text-[14px] w-full border bg-white rounded-lg p-2",rows:"5",type:"text",id:"body","onUpdate:modelValue":t[4]||(t[4]=e=>n.form.body=e),onBlur:t[5]||(t[5]=(...e)=>n.validateForm&&n.validateForm(...e))},null,544),[[i.Jo,n.form.body]])])),_:1},8,["error"]),(0,a.bF)(p,{class:"!w-fit mt-2",loading:n.isLoading,disabled:n.isLoading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(r.isEditing?"Save Changes":"Submit"),1)])),_:1},8,["loading","disabled"])],32)])),_:1},8,["title"]),(0,a.bF)(b,{initialTags:n.initialTags,isEditing:r.isEditing,"onUpdate:selectedTags":n.updateSelectedTags},null,8,["initialTags","isEditing","onUpdate:selectedTags"])])}var d=r(144),u=r(4084),c=r(7763),p=r(1422),g=r(8483);const b={class:"tags-container border bg-white rounded-lg p-6"},f={class:"tag-list border rounded-lg p-4"};function v(e,t,r,l,s,o){const n=(0,a.g2)("app-form-field"),d=(0,a.g2)("app-checkbox");return(0,a.uX)(),(0,a.CE)("section",b,[(0,a.Lk)("form",{class:"mb-4",onSubmit:t[3]||(t[3]=(0,i.D$)((()=>{}),["prevent"]))},[(0,a.bF)(n,{id:"tag",label:"Tags",error:l.tagError},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{onKeyup:[t[0]||(t[0]=(...e)=>l.resetError&&l.resetError(...e)),t[1]||(t[1]=(0,i.jR)(((...e)=>l.addNewTag&&l.addNewTag(...e)),["enter"]))],class:"text-[14px]",type:"text",id:"tag",placeholder:"New tag","onUpdate:modelValue":t[2]||(t[2]=e=>l.newTag=e)},null,544),[[i.Jo,l.newTag]])])),_:1},8,["error"])],32),(0,a.Lk)("ul",f,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.sortedTags,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:e,class:"flex gap-x-1 mb-2"},[(0,a.bF)(d,{id:"tag"+t,value:e,label:e,"model-value":l.selectedTags.includes(e),"onUpdate:modelValue":t=>l.updateTag(e,t)},null,8,["id","value","label","model-value","onUpdate:modelValue"])])))),128))])])}r(8111),r(1148),r(2489);const m={class:"flex items-center gap-x-2"},y={class:"relative flex items-center"},k=["id","value","checked"],w={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h=["for"];function x(e,t,r,i,s,o){return(0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("div",y,[(0,a.Lk)("input",{type:"checkbox",id:r.id,value:r.value,checked:r.modelValue,onInput:t[0]||(t[0]=(...e)=>i.updateCheckbox&&i.updateCheckbox(...e)),class:"absolute opacity-0 w-5 h-5 cursor-pointer"},null,40,k),(0,a.Lk)("span",{class:(0,l.C4)(["custom-checkbox w-[16px] h-[16px] border-2 rounded-sm flex items-center justify-center",[r.modelValue?"bg-green-300 border-green-300":"border-gray-600",e.error?"!border-red-500":""]])},[r.modelValue?((0,a.uX)(),(0,a.CE)("svg",w,t[1]||(t[1]=[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(0,a.Q3)("",!0)],2)]),(0,a.Lk)("label",{for:r.id,class:"cursor-pointer"},(0,l.v_)(r.label),9,h)])}var T={name:"app-checkbox",props:{id:{type:String,required:!0},value:{type:[String,Number,Object],required:!0},modelValue:{type:Boolean,default:!1},label:{type:String,default:""}},setup(e,t){function r(e){t.emit("update:modelValue",e.target.checked)}return{updateCheckbox:r}}},E=r(1241);const F=(0,E.A)(T,[["render",x],["__scopeId","data-v-2e02481f"]]);var A=F,L={name:"app-article-tags-view",components:{AppFormField:p.A,AppCheckbox:A},props:{initialTags:{type:Array,default:()=>[],validator:e=>e.every((e=>"string"===typeof e))},isEditing:{type:Boolean,default:!1}},setup(e,t){const{appContext:r}=(0,a.nI)(),i=r.config.globalProperties.$http,l=(0,d.KR)(!1),s=(0,d.KR)(""),o=(0,d.KR)(""),n=(0,d.KR)([]),u=(0,a.EW)((()=>[...n.value].sort())),c=(0,d.KR)([]),p=(e,t)=>{c.value=t?[...c.value,e]:c.value.filter((t=>t!==e))};async function g(){try{l.value=!0;const e=await i.get("/tags");return n.value=e.data.tags,{success:!0,response:e.data}}catch(e){if(e.response)return{success:!1,errors:e.response.data.errors||{}};throw new Error("Network error occurred")}finally{l.value=!1}}function b(){o.value=""}function f(e){b();const t=e.target.value;t?n.value.includes(t)?o.value="Tag Already Exists!":(n.value=[t,...n.value],c.value=[t,...c.value],s.value=""):o.value="Value is required!"}return(0,a.wB)(c,(e=>{t.emit("update:selectedTags",e)}),{deep:!0}),(0,a.wB)(e.initialTags,(()=>{console.log("**",e.initialTags),n.value=[...e.initialTags],c.value=[...e.initialTags]})),(0,a.sV)((()=>{e.isEditing||0!==e.initialTags.length||g()})),(0,a.$u)((()=>{0==n.value.length&&(n.value=[...e.initialTags],c.value=[...e.initialTags])})),{newTag:s,tagError:o,tagList:n,selectedTags:c,sortedTags:u,addNewTag:f,resetError:b,updateTag:p}}};const C=(0,E.A)(L,[["render",v]]);var V=C,_={components:{AppWidget:g.A,AppFormField:p.A,AppButton:c.A,AppArticleTagsView:V},props:{isEditing:{type:Boolean},slug:{type:String}},setup(e){const{appContext:t}=(0,a.nI)(),r=t.config.globalProperties.$http,i=(0,d.KR)(!1),l=(0,d.Kh)({title:"",description:"",body:"",tagList:[]}),s=(0,d.Kh)({title:"",description:"",body:"",tagList:[]}),o=(0,d.KR)([]);function n(e){l.tagList=e}async function c(e){i.value=!0;try{const t=await r.get(`/articles/${e}`);return Object.assign(l,t.data.article),o.value=[...t.data.article.tagList],{success:!0,data:t.data}}catch(t){console.error("Fetching Article By Slug Failed")}finally{i.value=!1}}(0,a.sV)((()=>{e.slug&&c(e.slug)}));const p=()=>{let e=!0;return s.title="",s.description="",s.body="",l.title||(s.title="Title is required!",e=!1),l.description||(s.description="Description is required!",e=!1),l.body||(s.body="Body is required!",e=!1),e};async function g(e){try{i.value=!0;const t=await r.put(`/articles/${e}`,{article:l});return u.oR.success("Article Edited Successfully!"),f(),{success:!0,data:t.data}}catch(t){if(u.oR.success("Article Edit Failed!"),t.response)return{success:!1,errors:t.response.data.errors||{}};throw new Error("Network error occurred")}finally{i.value=!1}}async function b(){if(p())if(e.slug)g(e.slug);else try{i.value=!0;const e=await r.post("/articles",{article:l});return u.oR.success("Article Created Successfully!"),f(),{success:!0,data:e.data}}catch(t){if(u.oR.success("Article Creation Failed!"),t.response)return{success:!1,errors:t.response.data.errors||{}};throw new Error("Network error occurred")}finally{i.value=!1}}function f(){Object.assign(l,{title:"",description:"",body:"",tagList:[]}),Object.assign(s,{title:"",description:"",body:""})}return{form:l,errors:s,isLoading:i,submitForm:b,validateForm:p,updateSelectedTags:n,initialTags:o}}};const B=(0,E.A)(_,[["render",n]]);var S=B}}]);
//# sourceMappingURL=149.ca675c70.js.map